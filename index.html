<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>宿題がんばり＆スタンプちょう</title>
    <!-- CSSファイルをここで読み込みます -->
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div id="app-container">

    <!-- 画面1: タイマー画面 -->
    <div id="timer-screen" class="screen">
        <div class="card">
            <h2 id="timer-title">しゅくだいタイマー</h2>
            <div id="study-timer-display" class="timer-display">00:00</div>
            <div id="break-timer-display" class="timer-display" style="display:none;">00:00</div>
            
            <button id="start-button" class="button button-start">宿題 開始！</button>
            <div id="during-study-buttons" style="display: none;">
                <button id="break-button" class="button button-break">休憩する</button>
                <button id="finish-button" class="button button-finish">終了する</button>
            </div>
            <div id="during-break-buttons" style="display: none;">
                <button id="resume-button" class="button button-start">再開する</button>
            </div>
        </div>
    </div>

    <!-- 画面2: 結果＆パスワード画面 -->
    <div id="result-screen" class="screen">
        <div class="card">
            <h2>おつかれさま！</h2>
            <p id="result-text"></p>
            <hr>
            <p id="password-prompt">おうちの人にパスワードを<br>入れてもらってね。</p>
            <input type="password" id="password-input" placeholder="パスワード">
            <button id="password-submit-button" class="button button-confirm">OK</button>
            <div id="confirm-area" style="display:none;">
                <p>よくがんばりました！</p>
                <button id="go-to-stamp-book-button" class="button button-confirm">スタンプ帳をひらく</button>
            </div>
        </div>
    </div>

    <!-- 画面3: スタンプ帳画面 -->
    <div id="stamp-book-screen" class="screen">
        <div id="stamp-book-header">
            <div id="user-info">
                <h3>なまえ</h3>
                <input type="text" id="user-name-input" placeholder="なまえをいれてね">
                <div id="reward-info"></div>
            </div>
            <div id="month-info">
                <h2 id="current-month"></h2>
                <p>合計: <span id="total-time">0</span> 分</p>
            </div>
            <div id="goal-info">
                <h3>今月の目標</h3>
                <input type="number" id="goal-time-input" placeholder="例: 1000"> 分
                <p id="goal-progress">--%</p>
            </div>
        </div>
        <p style="color: #6c757d; font-size: 0.9em;">（日付のマスをクリックすると、時間を手動で修正できます）</p>
        <div id="stamp-card" class="card"></div>
        <div class="button-group">
            <button id="history-button" class="button button-secondary">過去の記録を見る</button>
            <button id="back-to-timer-button" class="button button-start">タイマーにもどる</button>
            <button id="full-reset-button" class="button button-danger">全データリセット</button>
        </div>
    </div>
    
    <!-- 画面4: 履歴表示画面 -->
    <div id="history-screen" class="screen modal-overlay">
        <div class="card modal-content">
            <h2>過去のきろく</h2>
            <select id="month-selector"></select>
            <div id="history-summary"></div>
            <div id="history-card" class="card"></div>
            <button id="history-back-button" class="button button-secondary">もどる</button>
        </div>
    </div>

</div>

<!-- アラーム音用の非表示オーディオ要素 -->
<audio id="alarm-sound" src="https://freesound.org/data/previews/219/219244_4053677-lq.mp3" preload="auto"></audio>

<!-- ▼▼▼ "defer" を追加して、HTML読み込み後にスクリプトを実行するように修正 ▼▼▼ -->
<script src="script.js" defer></script>

</body>
</html>
